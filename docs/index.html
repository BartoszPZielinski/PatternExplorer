<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<meta name="author" content="Bartosz Zieliński, Paweł Maślanka">
<title>Documentation for PatternExplorer Tool.</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Documentation for PatternExplorer Tool.</h1>
<div class="details">
<span id="author" class="author">Bartosz Zieliński</span><br>
<span id="email" class="email"><a href="mailto:bartosz.zielinski@fis.uni.lodz.pl">bartosz.zielinski@fis.uni.lodz.pl</a></span><br>
<span id="author2" class="author">Paweł Maślanka</span><br>
<span id="email2" class="email"><a href="mailto:pawel.maslanka@fis.uni.lodz.pl">pawel.maslanka@fis.uni.lodz.pl</a></span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_about_the_tool">About the tool</a></li>
<li><a href="#_installation">Installation</a>
<ul class="sectlevel2">
<li><a href="#_requirements">Requirements</a></li>
<li><a href="#_installation_2">Installation</a></li>
</ul>
</li>
<li><a href="#_syntax_of_the_pattern_language">Syntax of the pattern language</a>
<ul class="sectlevel2">
<li><a href="#_binding_structure_of_patterns">Binding structure of patterns</a></li>
</ul>
</li>
<li><a href="#_using_patternexplorer">Using PatternExplorer</a>
<ul class="sectlevel2">
<li><a href="#_input_file_syntax">Input file syntax</a></li>
<li><a href="#_web_tool_cli">Web tool CLI</a></li>
<li><a href="#_web_tool_video_guide">Web tool video guide</a></li>
</ul>
</li>
<li><a href="#_api_and_source_files_guide">Api and source files guide</a>
<ul class="sectlevel2">
<li><a href="#_main_application">Main application</a>
<ul class="sectlevel3">
<li><a href="#_dependencies_between_files">Dependencies between files</a></li>
<li><a href="#_any_event_pl">any_event.pl</a></li>
<li><a href="#_time_constr_pl">time_constr.pl</a></li>
<li><a href="#_event_types_pl">event_types.pl</a></li>
<li><a href="#_skippable_pl">skippable.pl</a></li>
<li><a href="#_skip_pattern_syntax_pl">skip_pattern_syntax.pl</a></li>
<li><a href="#_so_auto_cp_pl">so_auto_cp.pl</a></li>
<li><a href="#_compiler_state_pl">compiler_state.pl</a></li>
<li><a href="#_compiler_helpers_pl">compiler_helpers.pl</a></li>
<li><a href="#_skip_pattern_compiler_pl">skip_pattern_compiler.pl</a></li>
<li><a href="#_pattern_pl">pattern.pl</a></li>
<li><a href="#_patterns_clpfd_pl">patterns_clpfd.pl</a></li>
<li><a href="#_read_patterns_pl">read_patterns.pl</a></li>
<li><a href="#_style_css">style.css</a></li>
<li><a href="#_write_pattern_pl">write_pattern.pl</a></li>
<li><a href="#_server_pl">server.pl</a></li>
</ul>
</li>
<li><a href="#_example_and_tests">Example and tests</a>
<ul class="sectlevel3">
<li><a href="#_example_data_pl">example_data.pl</a></li>
<li><a href="#_aux_types_data_pl">aux_types_data.pl</a></li>
<li><a href="#_timed_test_pl">timed_test.pl</a></li>
<li><a href="#_create_plot_py">create_plot.py</a></li>
<li><a href="#_auto_noskip_pl">auto_noskip.pl</a></li>
<li><a href="#_auto_noskip_conc_pl">auto_noskip_conc.pl</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_evaluation">Evaluation</a>
<ul class="sectlevel2">
<li><a href="#_description_of_generated_csv_file">Description of generated csv file</a></li>
<li><a href="#_raw_test_results">Raw test results</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_about_the_tool">About the tool</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Complex event processing (CEP) systems  discover in the incoming event stream   occurrences of
patterns of events (called complex events) which indicate threats, opportunities, or  necessity of some action. Sufficiently complex patterns  may become  hard to understand, and even simple patterns may contain subtle errors with respect to their intended meaning.</p>
</div>
<div class="paragraph">
<p><strong class="underline">PatternExplorer</strong> tool helps to find errors in patterns.
The tool compiles patterns (regular language-like) into a non-deterministic automata with variables.
Compiled patterns can be matched with streams of events. More importantly, using extended narrowing the tool can generate effectively symbolic event sequences satisfying a pattern. Generated sequences can then be matched with another pattern to check if there are any unintended matching complex events.
Of particular note is our efficient representation of skipped events in generated symbolic streams which avoids creation of spurious instances and reduces the search space. A user-friendly web interface provides access to most important functionalities.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation">Installation</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_requirements">Requirements</h3>
<div class="paragraph">
<p>The code was tested only with <a href="https://www.swi-prolog.org/"><strong>SWI Prolog</strong></a> (it may not work with other Prolog environments as it uses some non-standard libraries. Also module systems differ between Prolog interpreters). Functor <code>call_time/2</code> from
<a href="https://www.swi-prolog.org/pldoc/man?section=statistics"><code>statistics</code></a>
module which we use in tests was introduced relatively recently so a year-old installation of SWI Prolog may not have it.</p>
</div>
<div class="paragraph">
<p>Execution of the code should not depend on the operating system (it was tested on MacOS X and Windows 10) as it does not use any operating system specific libraries.</p>
</div>
<div class="paragraph">
<p>Recompilation of documentation requires
<a href="https://docs.asciidoctor.org/"><strong>AsciiDoc</strong></a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_installation_2">Installation</h3>
<div class="paragraph">
<p>Clone the github repository:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">git clone https://github.com/BartoszPZielinski/PatternExplorer</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_syntax_of_the_pattern_language">Syntax of the pattern language</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The pattern language uses the following constructs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>start(X)</code> bind <code>X</code> to a last matched event (or special sentinel event <code>start(0)</code> if <code>start(X)</code> occurs at the beginning of a pattern).</p>
</li>
<li>
<p><code>event(T,X)</code> matches an event of type <code>T</code> and binds it to <code>X</code>.</p>
</li>
<li>
<p><code>any(X)</code> recognizes event of any type  and binds it to a variable <code>X</code>.</p>
</li>
<li>
<p><code>iter(P)</code> matches repetitions of <code>P</code>.</p>
</li>
<li>
<p><code>iter(P, f(h₁(E₁),…,hₐ(Eₐ)), X)</code> matches repetitions of <code>P</code>, and binds <code>X</code> to an event <code>f(v₁,…,vₐ)</code> where <code>v₁</code> is the result of aggregating with <code>hᵢ</code> the values of expression <code>Eᵢ</code>. It is assumed that event schema contains the definition of an event type of the form <code>f(a₁,…,aₐ)</code> so that we can later refer to <code>vᵢ</code> as <code>ref(X, aᵢ)</code>.</p>
</li>
<li>
<p><code>P₁ or P₂</code> matches events matched either by <code>P₁</code> or <code>P₂</code>.</p>
</li>
<li>
<p><code>P₁ then P₂</code> matches <code>P₁</code> followed by <code>P₁</code>.</p>
</li>
<li>
<p><code>filter(P, C)</code> matches <code>P</code> if it satisfies condition <code>C</code>.</p>
</li>
<li>
<p><code>noskip(P, event(T, X), C)</code> matches string <code>S</code> matched by <code>P</code> if in <code>S</code> there does not occur an event of type <code>T</code> not explicitly matched in <code>P</code> which satisfies condition <code>C</code>.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Currently we implement standard aggregate functions <code>sum(E)</code>, <code>min(E)</code>, <code>max(E)</code>, <code>avg(E)</code>, <code>count(*)</code>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The only numerical values allowed are integers and all conditions must use predicates from <a href="https://www.swi-prolog.org/man/clpfd.html"><code>library(clpfd)</code></a>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Variables in patterns are actual Prolog variables and must start with a capital lettter.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Unfortunately, SWI Prolog seeing dot assumes its left operand must be a dict. Thus, instead of using a natural notation of the form <code>X.a</code> to refer to the attribute <code>a</code> of event bound to the variable <code>X</code>  we use a much more cumbersome notation <code>ref(X, a)</code>. Thus, e.g., condition
<code>X.a &gt; 0</code> is expressed in the actual pattern language as
<code>ref(X, a) #&gt; 0</code> (note the use of clpfd comparison operator <code>\#&gt;</code>).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A pattern is passed to the compiler always as a full pattern, i.e., as a term of the form <code>select(Input, Output, Pattern)</code>, where <code>Pattern</code> is a pattern (constructed with functors as above) and Input and Output are terms of the form <code>in(X₁,…,Xₑ)</code> and <code>out(Y₁,…,Yₐ)</code>, respectively, where</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>X₁,…,Xₑ</code> are distinct variables which must include all free variables of <code>Pattern</code>,</p>
</li>
<li>
<p><code>Y₁,…,Yₐ</code> are distinct variables which must contain only variables bound by Pattern.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_binding_structure_of_patterns">Binding structure of patterns</h3>
<div class="paragraph">
<p>It remains to describe the binding structure of patterns. First we describe (by recursion on the structure of the pattern) the set of variables bound by a pattern:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>start(X)</code> binds <code>X</code> (to the last matched event)</p>
</li>
<li>
<p><code>event(T, X)</code> binds <code>X</code> (to the matched event of type <code>T</code>)</p>
</li>
<li>
<p><code>any(X)</code> binds <code>X</code> (to the matched event of any type)</p>
</li>
<li>
<p><code>iter(P)</code> binds nothing.</p>
</li>
<li>
<p><code>iter(P, f(h₁(E₁),…,hₐ(Eₐ)), X)</code> binds only <code>X</code></p>
</li>
<li>
<p><code>P₁ or P₂</code> binds variables bound by both <code>P₁</code> and <code>P₂</code>. Since only one of the two alternatives is actually matched there is no possibility of conflict</p>
</li>
<li>
<p><code>P₁ then P₂</code> binds variables bound by either <code>P₁</code> or <code>P₂</code>. Bindings from <code>P₂</code> shadow bindings from <code>P₁</code></p>
</li>
<li>
<p><code>filter(P, C)</code> and <code>noskip(P, Event(T,X), C)</code> bind variables bound by <code>P</code> (in particular <code>X</code> is not visible outside).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Let us now describe shadowing and (internal) scope of variable bindings. Variables are read in conditions and in aggregation expressions. We have</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>event(T,X)</code> cannot contain conditions or aggregation expressions so there is nothing to describe here.</p>
</li>
<li>
<p>For <code>iter(P)</code> scope of variables is the same as in <code>P</code></p>
</li>
<li>
<p>Consider now <code>iter(P, f(h₁(E₁),…,hₐ(Eₐ)), X)</code>. <code>X</code> is not visible in <code>P</code> or expressions <code>Eᵢ</code>. Expressions <code>Eᵢ</code> are in the scope of variables bound by <code>P</code> which take precedence (shadow) external binding of identically named variables.</p>
</li>
<li>
<p>In case of <code>P₁ or P₂</code>  neither bindings provided by <code>P₁</code> are visible in <code>P₂</code> nor bindings provided by <code>P₂</code> are visible in <code>P₁</code>.</p>
</li>
<li>
<p>In case of <code>P₁ then P₂</code> bindings provided by <code>P₂</code> are not visible in <code>P₁</code>. However, bindings provided by <code>P₁</code> are visible in <code>P₂</code>. In case of conflict inside <code>P₂</code> variables bound inside <code>P₂</code> shadow those bound by <code>P₁</code>.</p>
</li>
<li>
<p>In case of <code>filter(P, C)</code> condition <code>C</code> is in the scope of variables bound by <code>P</code> and bindings provided by <code>P</code> take precedence (shadow) external ones.</p>
</li>
<li>
<p>In case of <code>noskip(P, Event(T,X), C)</code> condition <code>C</code> is in the scope of <code>X</code> but not of variables bound by <code>P</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The compilation function requires that there is no shadowing of variables. Naively, it would seem to be sufficient to forbid binding the same variable in two distinct places in the same pattern. However, since the alternative (<code>P₁ or P₂</code>) binds variables bound in both subpatterns we have to permit repetition of bindings in alternative subpatterns if they are not shadowed. A pattern which contains only minimal repetition of bindings (in the alternative subpatterns) is said to satisfy the unique variable property</p>
</div>
<div class="paragraph">
<p>A pattern can be converted to the no-shadowed form using predicate</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-prolog" data-lang="prolog">make_pattern_unique/2</code></pre>
</div>
</div>
<div class="paragraph">
<p>from module <code>skip_pattern_syntax</code>. This predicate is actually used by the web tool when compiling patterns provided in the input file.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_patternexplorer">Using PatternExplorer</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_input_file_syntax">Input file syntax</h3>
<div class="paragraph">
<p>The input file consists of a sequence of Prolog terms (each ending with a dot).
One can use Prolog comments inside the input file.</p>
</div>
<div class="paragraph">
<p>The first term contains optional descriptions of attribute domains.
It is recommended to limit the domain of <code>time</code> attribute (as well as any other
attribute participating in any condition more complex than simple equality)
to a finite one. This is because contradictory clpfd  constraints may not be
recognized as such if their variables are not constrained to a finite domain.</p>
</div>
<div class="paragraph">
<p>The term defining attribute domains is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-prolog" data-lang="prolog">def_attr_domains([
   attr_dom(attr1, x0..x1),
   attr_dom(attr2, y0..y2),
   ...
]).</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>attr1</code>, <code>attr2</code>, … are attribute names and <code>x0</code>, <code>x1</code>, <code>y0</code>, <code>y1</code>, … are
integers or symbols <code>inf</code> or <code>sup</code>. Thus e.g.,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-prolog" data-lang="prolog">def_attr_domains([
   attr_dom(time, 0..300),
   attr_dom(delta_schedule, 0..200)
]).</code></pre>
</div>
</div>
<div class="paragraph">
<p>declares that the value of attribute <code>time</code> will be between 0 and 300 and
the value of attribute <code>delta_schedule</code> will be between 0 and 200.</p>
</div>
<div class="paragraph">
<p>The second term defines event schema (it is important that all events appearing in the event stream, i.e., all events except for aggregation events, have the attribute <code>time</code>). The form of this term is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-prolog" data-lang="prolog">def_event_types([
    event_type_specification_1,
    event_type_specification_2,
    event_type_specification_3,
    ...
]).</code></pre>
</div>
</div>
<div class="paragraph">
<p>E.g., example input file contains the following declaration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-prolog" data-lang="prolog">def_event_types([
    stop_enter(id, stop_id, delta_schedule, time),
    stop_leave(id, stop_id, delta_schedule, time),
    abrupt_accel(id, time),
    abrupt_decel(id, time),
    sharp_turn(id, dir, time),
    driver_in(id, drv_id, time),
    driver_out(id, drv_id, time),
    velocity(id, max, min, avg, start_time, time),
    location(id, location_id, time),
    agg(cnt)
]).</code></pre>
</div>
</div>
<div class="paragraph">
<p>Observe that this is a proper Prolog term so  names of event types and names of attributes must not start with upper-case letters unless they are put inside single quotes.</p>
</div>
<div class="paragraph">
<p>Next, there should appear pattern declarations.
Each pattern declaration has the form</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-prolog" data-lang="prolog">pattern(PatternId, select(
    inp(V1, V2, ...),
    out(W1, W2, ...),
	Pattern
)).</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>PatternId</code> is a pattern identifier (it can be a number or an atom, or any other ground term),</p>
</li>
<li>
<p><code>V1</code>, <code>V2</code>, … are input variables (they must all be distinct, and to be useful they should occur in conditions in pattern <code>Pattern</code>, they must not, however, be bound by <code>Pattern</code>),</p>
</li>
<li>
<p><code>W1</code>, <code>W2</code>, … are output variables (they must all be distinct, and they must all occur in the pattern <code>Pattern</code>),</p>
</li>
<li>
<p><code>Pattern</code> is the actual pattern.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Input and output variables, as well as all the other variables occurring in <code>Pattern</code> must be actual Prolog variables. This means that they must start with a capital letter.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For example, the file <code>example_data.pl</code> contains the following pattern declaration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-prolog" data-lang="prolog">pattern(11, select(inp(Se, K), out,
  filter(
    event(driver_in, D),
    ref(D, id) #= ref(Se, id) #/\
        ref(D, time) #&gt; ref(Se, time) #/\
        ref(D, time) #&lt; ref(K, time)
  )
)).</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, input file can contain test declarations called &#8220;examples&#8221;`.
There are four kinds of example declarations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Declaration of a simple test for parameterless pattern (with no input variables) of the form</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-prolog" data-lang="prolog">example(ExId, ex(PatternId)).</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>ExId</code> is a test identifier and <code>PatternId</code> is a pattern identifier.</p>
</div>
</div>
</div>
</li>
<li>
<p>Declaration of a parametrized test of the form</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-prolog" data-lang="prolog">example(ExId, ex(PatternId, inp(e1, e2, ...))</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>ExId</code> and <code>PatternId</code> are like above and <code>e1</code>, <code>e2</code>, … are input <em>events</em>.</p>
</div>
</div>
</div>
</li>
<li>
<p>Declaration of a test of a pattern with identifier <code>Pid1</code> with another pattern <code>Pid2</code>, where instances of <code>Pid1</code> are matched with <code>Pid2</code>:</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-prolog" data-lang="prolog">example(ExId, ex(Pid1,
   out(V1, V2, ...)-inp(W1, W2, ...), Pid2)).</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here <code>ExId</code> is a test identifier, and expression</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-prolog" data-lang="prolog">out(V1, V2, ...)-inp(W1, W2, ...)</code></pre>
</div>
</div>
<div class="paragraph">
<p>links output of <code>Pid1</code> with input of <code>Pid2</code>.</p>
</div>
</div>
</div>
</li>
<li>
<p>Declaration of a test of a pattern with identifier <code>Pid1</code> with another pattern <code>Pid2</code>, where instances of <code>Pid1</code> are matched with <code>Pid2</code>, but in addition pattern
<code>Pid1</code> is not closed and has some input events:</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-prolog" data-lang="prolog">example(ExId, ex(Pid1,
   inp(U1, U2, ...)-out(V1, V2, ...)-inp(W1, W2, ...), Pid2)).</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here <code>ExId</code> is a test identifier, and expression</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-prolog" data-lang="prolog">inp(U1, U2, ...)-out(V1, V2, ...)-inp(W1, W2, ...)</code></pre>
</div>
</div>
<div class="paragraph">
<p>links output of <code>Pid1</code> with input of <code>Pid2</code>, and in addition it also sets the
input events <code>U1, U2, &#8230;&#8203;</code> of <code>Pid1</code>.</p>
</div>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For instance, file <code>example_data.pl</code> contains the following declarations
(among others):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-prolog" data-lang="prolog">example(1, ex(10, out(X, T)-inp(X, T), 11)).
example(2, ex(0)).
example(21, ex(12, inp(driver_in(10, _, _)))).</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_web_tool_cli">Web tool CLI</h3>
<div class="paragraph">
<p>In order to run the web interface</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Go to the command line and change the directory to the directory with tool source.</p>
</li>
<li>
<p>Create the input file with description of event types and patterns. To test the app one can use the example input file <code>example_data.pl</code> from the tool source directory.</p>
</li>
<li>
<p>Run the interpreter on the server.pl file:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">swipl ./server.pl</code></pre>
</div>
</div>
</li>
<li>
<p>From the Prolog interpreter run the following command (adjust if necessary):</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-prolog" data-lang="prolog">server(
    3000, <i class="conum" data-value="1"></i><b>(1)</b>
    'example_data.pl' <i class="conum" data-value="2"></i><b>(2)</b>
).</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>port number the web interface will use,</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>the path to the input file.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The command above will read the input file, compile the patterns and start the web interface.</p>
</div>
</div>
</div>
</li>
<li>
<p>In the browser navigate to appropriate address, e.g., <a href="http://localhost:3000" class="bare">http://localhost:3000</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_web_tool_video_guide">Web tool video guide</h3>
<div class="paragraph">
<p>You can see a better quality version <a href="http://ki.wfi.uni.lodz.pl/media/PatternExplorer.mp4">here</a></p>
</div>
<div style="text-align:center">
    <video controls src="PatternExplorer4.mp4"
    style="max-width: 100%"></video>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_api_and_source_files_guide">Api and source files guide</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Documentation sources are contained in <code>docs</code> subfolder.</p>
</div>
<div class="paragraph">
<p>App sources and tests are contained in <code>PatternExplorer</code> subfolder.</p>
</div>
<div class="sect2">
<h3 id="_main_application">Main application</h3>
<div class="sect3">
<h4 id="_dependencies_between_files">Dependencies between files</h4>
<div class="paragraph">
<p><span class="image"><img src="dependencies.svg" alt="dependencies" width="100%"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="_any_event_pl">any_event.pl</h4>
<div class="paragraph">
<p>This module defines  functor <code>any_event/1</code> used in the implementation of
pattern <code>any(X)</code>. The call <code>any_event(X)</code> always succeeds, but if <code>X</code> is a variable it ataches to it a constraint <code>any_event</code> which just serves as a marker. Variables thus marked are treated as single (unspecified) events in the narrowed event stream and not  subsequences of events.</p>
</div>
</div>
<div class="sect3">
<h4 id="_time_constr_pl">time_constr.pl</h4>
<div class="paragraph">
<p>This module defines functor <code>time_constr/2</code>. The call of the form <code>time_constr(X, T)</code> where <code>X</code> is an event variable  adds time attribute equal to <code>T</code> to <code>X</code> (and fails if <code>X</code> has already a time attribute distinct from <code>T</code>). This permits us to constrain time on events of unspecified type bound by <code>any(X)</code>. If <code>E</code> is an event and not a variable then <code>time_constr(E, T)</code> simply checks if timestamp of <code>E</code> is equal to <code>T</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_event_types_pl">event_types.pl</h4>
<div class="paragraph">
<p>The module event_types defines two important functors: <code>def_event_type/1</code> and <code>def_event_types/1</code> which accept as a single argument either, respectively, a single declaration of an event type or a list of such declarations. The functors assert associated definitions of <code>ref/3</code> and <code>event_type/2</code> functors (also exported by the module). The role of the generated functors is explained below. The module also defines functors event_time/2 (returning timestamp of an event), and <code>update_time/4</code> which is used by generated automaton and not by the user. Finally, the module also defines the functors <code>def_attr_domains/1</code> and <code>attr_dom/2</code> associated with describing domains of attributes of events which will be described below.</p>
</div>
<div class="paragraph">
<p>Events are represented as Prolog terms of the form</p>
</div>
<div class="listingblock">
<div class="content">
<pre>⟨event type⟩(⟨attr_value₁⟩, ⟨attr_value₂⟩, …)</pre>
</div>
</div>
<div class="paragraph">
<p>where <code>⟨event type⟩</code> plays the role of functor, and arguments are the event&#8217;s attributes. Event schema is a list of terms of the form</p>
</div>
<div class="listingblock">
<div class="content">
<pre>⟨event_type⟩(⟨attr_name₁⟩, ⟨attr_name₂⟩, …)</pre>
</div>
</div>
<div class="paragraph">
<p>with no two terms with the same functor. Declaration such as the one above means that events of type <code>⟨event_type⟩</code> have attributes with names <code>⟨attr_name₁⟩</code>, <code>⟨attr_name₂⟩</code>, …. Event</p>
</div>
<div class="listingblock">
<div class="content">
<pre>⟨event type⟩(⟨attr_value₁⟩, ⟨attr_value₂⟩, …)</pre>
</div>
</div>
<div class="paragraph">
<p>has type <code>⟨event type⟩</code> and its argument of name <code>⟨attr_nameᵢ⟩</code> has value <code>⟨attr_nameᵢ⟩</code> for i∈{1, 2, …}.</p>
</div>
<div class="paragraph">
<p>If <code>X</code> is an event with an attribute <code>a</code> then in our pattern language we refer to the value of this attribute as <code>ref(X, a)</code>. During compilation of patterns such terms are replaced by fresh variables (say <code>Y</code> for the sake of example) and additional goals of the form <code>ref(X, a, Y)</code> are added. The goal <code>ref(X, a, Y)</code> is satisfied when the attribute <code>a</code> of an event <code>X</code> has value <code>Y</code>.</p>
</div>
<div class="paragraph">
<p>To check the type of an event one can use predicate <code>event_type/2</code>: The goal</p>
</div>
<div class="listingblock">
<div class="content">
<pre>event_type(⟨event⟩, ⟨type⟩)</pre>
</div>
</div>
<div class="paragraph">
<p>is satisfied when <code>⟨event⟩</code> has type <code>⟨type⟩</code>.</p>
</div>
<div class="paragraph">
<p>Finally, we describe functor <code>def_attr_domains/1</code> and <code>attr_dom/2</code>
associated with describing domains of attributes of events. Functor
<code>def_attr_domains/1</code>  accepts as a single argument  a list of
attribute domains declarations. Each declaration of domain of an attribute has the
form</p>
</div>
<div class="listingblock">
<div class="content">
<pre>attr_dom(attr₁, x₁..x₂)</pre>
</div>
</div>
<div class="paragraph">
<p>where <code>attr₁</code> is an attribute name and <code>x₁</code> and <code>x₂</code> are
integers or symbols <code>inf</code> or <code>sup</code>. Thus, the above declares that
<code>attr₁</code> is between <code>x₁</code> and <code>x₂</code>.</p>
</div>
<div class="paragraph">
<p>Execution of <code>def_attr_domains/1</code> defines dynamic functor <code>attr_dom/2</code>.
The call <code>attr_dom(a, X)</code> applies the domain constraint associated to attribute <code>a</code>
(by <code>def_attr_domains/1</code>) to the value (or variable) <code>X</code>. This functor rarerly needs to be called explicitly, as it is called implicitly when calling <code>ref/3</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_skippable_pl">skippable.pl</h4>
<div class="paragraph">
<p>This file contains definition of variable attribute skippable and associated hooks which permits constraint reasoning about types of events an unbound variable cannot be bound to. This module exports a single predicate <code>skippable/3</code> which works as follows:  Let <code>V</code> be a fresh variable and <code>Pairs</code> be a list of pairs of the form <code>⟨type, condition⟩</code>, where <code>condition</code> constrains <code>V</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If <code>Event</code> is a variable then
<code>skippable(Event, V, Pairs)</code> adds to <code>Event</code> the constraint <code>skip(V, Pairs)</code> which declares that <code>Event</code> is either not of one of the types mentioned in <code>Pairs</code>, or it is of one of those types and it satisfies the associated condition.</p>
</li>
<li>
<p>if <code>Event</code> is not a variable than <code>skippable(Event, V, Pairs)</code> checks if the  the skippability encoded by <code>skip(V, Pairs)</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_skip_pattern_syntax_pl">skip_pattern_syntax.pl</h4>
<div class="paragraph">
<p>Module skip_pattern_syntax exports, aside from binary operators <code>or</code>, <code>and</code>, and <code>then</code>  which are used in the patterns, also some predicates which check the properties of patterns related to variables and can convert patterns into satisfying <strong>unique variable property</strong>. The exported predicates are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>pattern_binds/2</code>: Given a pattern <code>P</code> a goal <code>pattern_binds(P, V)</code> binds <code>V</code> to the (ordered) list of all variables bound by <code>P</code></p>
</li>
<li>
<p><code>closed/2</code>: Given a pattern <code>P</code> a goal <code>closed(P, V)</code> is satisfied iff <code>P</code> is closed and <code>V</code> is the ordered list of variables bound by <code>P</code> (i.e., the same set as <code>pattern_binds/2</code> binds).</p>
</li>
<li>
<p><code>is_unique_pattern/1</code>: The goal <code>is_unique_pattern(P)</code> is satisfied iff a pattern <code>P</code> has a <strong>unique variable property</strong>, i.e., no variables are shadowed or unnecessarily reused.</p>
</li>
<li>
<p><code>make_pattern_unique/2</code>: Given a pattern <code>P0</code> the goal <code>make_pattern_unique(P0, P)</code> binds a pattern to a variable <code>P</code> which is  equivalent to P0, but has fresh variables and satisfies the <strong>unique variable property</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note that while predicates <code>pattern_binds/2</code>, <code>closed/2</code>, and <code>is_unique_pattern/1</code> do not make any assumptions about how the event variables are represented in the pattern passed as an argument (actual Prolog variables or any other terms, it does not matter), but <code>make_pattern_unique/2</code> requires for correct execution that the pattern passed as a first argument has event variables represented by actual Prolog variables (and the resulting pattern bound to the second argument represents event variables as Prolog variables as well). This is not checked in the goal, so it may lead to difficult to find errors.</p>
</div>
</div>
<div class="sect3">
<h4 id="_so_auto_cp_pl">so_auto_cp.pl</h4>
<div class="paragraph">
<p>This module defines a runtime for an automaton recognizing patterns.
Automatons  (or rather a family of automatons) are defined by the following
five dynamic predicates (asserted during compilation of patterns):</p>
</div>
<div class="paragraph">
<p>itself, a user needs to provide definition for the following five predicates ( the first argument of the first predicate is an identifier which distinguishes between distinct, simultanously defined automatons):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>initial(Id, Input, I)</code> : <code>I</code> is an initial state for an automaton identified by <code>Id</code> (since we assume that from an initial state of one automaton it is impossible to reach state of another automaton, automaton identifier is absent from other automaton defining predicates). Note that initial state is always unique (for a given automaton) except for values of associated state data. <code>Input</code> is a term of the form <code>in(E₁, …, Eₐ)</code> (the actual functor may depend on the definition of the automaton).
Here E₁, …, Eₐ are events to be bound to variables in the initial state I.</p>
</li>
<li>
<p><code>final(F, Output)</code> : F is a final state (there may be many final states with distinct functors). Output is a term of the form out(X₁,…,Xₐ) (the actual functor may depend on the definition of the automaton) where X₁,…,Xₐ are variables which get bound to the values of selected event variables associated with the final state F.</p>
</li>
<li>
<p><code>trans(S0, E, Node, S1)</code> : automaton can move, after consuming an event <code>E</code> from state <code>S0</code> to state <code>S1</code>. <code>Node</code> is a special term describing where from in the original pattern this transition comes from. We will describe those terms later.</p>
</li>
<li>
<p><code>eps(S0, S1)</code> : automaton can do an ϵ-move from <code>S1</code> to <code>S2</code>,</p>
</li>
<li>
<p><code>skip(S, E)</code> : automaton can skip event <code>E</code> when in state <code>S</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To run the automaton use <code>match_list/5</code> which is the sole functor exported by module <code>so_auto_cp</code>. More precisely, the goal</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-prolog" data-lang="prolog">match_list(Id, L0, L, MTrees, Options)</code></pre>
</div>
</div>
<div class="paragraph">
<p>is satisfied iff the automaton identified by <code>Id</code> (automatons created by pattern compiler have identifiers identical to identifier of the pattern they were compiled from) recognizes a list <code>L0</code> which it rewrites into <code>L</code> and
<code>MTrees</code> is a list of lists of positions. Each position in each of the lists in <code>MTrees</code> is either an atom <code>skip</code> or it indicates a  position in the pattern from which the automaton was compiled, and where the corresponding element of <code>L</code> was matched. <code>MTrees</code> contains a list of lists of positions instead of a single list of positions because we can chain the matchings (which can also generate solutions using generalized narrowing). The last element of <code>MTrees</code> corresponds to the present matching, the remaining ones are the results of modifications of lists of positions passed in <code>Options</code>, which, presumably, defined positions of matchings in previous passes of <code>match_list/5</code> which generated <code>L0</code>. Modifications are necessary because <code>L</code> can be longer than L0 (if <code>L0</code> was not ground) and all lists in <code>MTrees</code> must have equal length with <code>L</code>.</p>
</div>
<div class="paragraph">
<p><code>Options</code> is a list of options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>input(Input)</code>: input events passed to initial state (default in)</p>
</li>
<li>
<p><code>output(Output)</code>: output events taken from the output state (default out). Note that here one usually passes a variable which is then bound by <code>match_list/5</code> execution.</p>
</li>
<li>
<p><code>max_depth(MaxLen)</code>: Only <code>MaxLen</code>  (default 20) of events will be consumed. This limits the depth of search.</p>
</li>
<li>
<p><code>inmtrees(MTreesIn)</code>: a list of lists of positions coming from earlier chained matchings.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To explain positions consider the following pattern:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-prolog" data-lang="prolog">filter(
    event(a, X)
    then
    iter(
        filter(
            event(b, Y) <i class="conum" data-value="1"></i><b>(1)</b>
            or
            event(c, Y)
            ref(X, id) #= ref(Y, id)
        )
    ),
    ref(X, time) #&gt; 100
)</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Since this <code>c</code>-event is matched inside iteration construct it can be matched multiple times. Associated positions will be of the form <code>pos([p(2), i(0), p(1)])</code>, <code>pos([p(2), i(1), p(1)])</code>, …. Here <code>p(2)</code> corresponds to the fact that the matching is done in the second argument of <code>then</code>, <code>i(0)</code>, <code>i(1)</code>, etc., counts the iteration (and also corresponds to iteration construct), next <code>p(1)</code> says that the event was matched in the first argument of <code>or</code>, etc.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Note that pattern constructors which have only single subpatterns (like <code>filter</code>) are not explicitly encoded in the position. Iterations have single subpattern, but they can be matched many times which is indicated by <code>i()</code>-terms. Web interface uses those positions to display the pattern with the part where the matching took place emphasized.</p>
</div>
<div class="paragraph">
<p>The concept of chaining can be explained with the following example.
Suppose that 1 and 2 are identifiers of compiled patterns and that
pattern 1 has output of the form <code>out(X)</code>, and pattern 2 has input <code>in(Y)</code>.
Then the following call will generate bound <code>L</code> to symbolic lists of events
matching both pattern 1 and 2 with output event of 1 bound to input event of 2:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-prolog" data-lang="prolog">:- match_list(1, <i class="conum" data-value="1"></i><b>(1)</b>
      _, <i class="conum" data-value="2"></i><b>(2)</b>
      L0, <i class="conum" data-value="3"></i><b>(3)</b>
      [MTree0], <i class="conum" data-value="4"></i><b>(4)</b>
      [output(out(X))] <i class="conum" data-value="5"></i><b>(5)</b>
   ),
   match_list(2, <i class="conum" data-value="6"></i><b>(6)</b>
      L0, <i class="conum" data-value="7"></i><b>(7)</b>
      L,
      MTrees, <i class="conum" data-value="8"></i><b>(8)</b>
      [
        input(in(X)), <i class="conum" data-value="9"></i><b>(9)</b>
        inmtrees([MTree0]) <i class="conum" data-value="10"></i><b>(10)</b>
      ]
   )</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We first match pattern 1,</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>We start with an unbound variable as a list to be matched, which means that we want to generate solutions</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>L0</code> will be bound to a narrowed list matching pattern 1</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>MTree0</code> represents information about where in Pattern 1 events in <code>L0</code> where matched</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>We output the output event</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Now we match the second pattern</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>against the list of events narrowed to be solution of the first pattern</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>this will be bound to <code>[MTrees1, MTrees2]</code>, where <code>MTrees1</code> is updated <code>MTrees0</code> (with some skip&#8217;s inserted) and <code>MTrees2</code> represents  information about where in Pattern 2 events in <code>L</code> where matched</td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>here we bound input of pattern 2 to pattern 1</td>
</tr>
<tr>
<td><i class="conum" data-value="10"></i><b>10</b></td>
<td>and we also pass <code>MTrees0</code>. Note that this is a list since we can chain more than two patterns (even though the web interface does not support that yet)</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_compiler_state_pl">compiler_state.pl</h4>
<div class="paragraph">
<p>The file contains definitions of internal predicates assisting in compilation proces. They are not to be used directly by the user.</p>
</div>
</div>
<div class="sect3">
<h4 id="_compiler_helpers_pl">compiler_helpers.pl</h4>
<div class="paragraph">
<p>The file contains definitions of internal predicates assisting in compilation proces. They are not to be used directly by the user.</p>
</div>
</div>
<div class="sect3">
<h4 id="_skip_pattern_compiler_pl">skip_pattern_compiler.pl</h4>
<div class="paragraph">
<p>Module skip_pattern_compiler defines predicates which compile patterns into automatons (described <a href="#_so_auto_cp_pl">earlier</a>). The module exports a single predicate: <code>assert_regular/2</code>: Given an identifier <code>Id</code> (which can be any term) and a pattern <code>P</code> the goal <code>assert_regular(Id, P)</code> asserts (into <code>so_auto_cp</code> module) predicates <code>initial/3</code>, <code>final/2</code>, <code>trans/4</code>, <code>eps/2</code> and <code>skip/2</code> (see section <a href="#_so_auto_cp_pl">so_auto_cp.pl</a>).</p>
</div>
</div>
<div class="sect3">
<h4 id="_pattern_pl">pattern.pl</h4>
<div class="paragraph">
<p>This module defines a number of helper functors which deal with high-level compilation of patterns and execution of examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>pattern/3</code> - a dynamic predicate defined by the call to <code>assert_file/1</code> in module <a href="#_read_patterns_pl">read_patterns.pl</a> which stores information about patterns read from the input file. For each pattern a fact of the form</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>pattern(Id, Pattern, Vars)</pre>
</div>
</div>
<div class="paragraph">
<p>is stored where <code>Id</code> is a pattern identifier, <code>Pattern</code> is a pattern as read by <a href="https://www.swi-prolog.org/pldoc/man?predicate=read_term/2"><code>read_term/2</code></a> functor from the input file, and <code>Vars</code> are pairs of equalities VariableName=Var, as defined in the <code>variable_names</code> option of <a href="https://www.swi-prolog.org/pldoc/man?predicate=read_term/2"><code>read_term/2</code></a> (those store original variable names, which is usefule when printing patterns).</p>
</div>
</div>
</div>
</li>
<li>
<p><code>example/3</code> - a dynamic predicate defined by the call to <code>assert_file/1</code> in module <a href="#_read_patterns_pl">read_patterns.pl</a> which stores information about patterns read from the input file. For each pattern a fact of the form</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre>example(Id, Example, Vars)</pre>
</div>
</div>
<div class="paragraph">
<p>is stored where <code>Id</code> is an example identifier, <code>Example</code> is an <code>ex</code>-term
(see <a href="#_input_file_syntax">Input file syntax</a>) as read by <a href="https://www.swi-prolog.org/pldoc/man?predicate=read_term/2"><code>read_term/2</code></a> functor from the input file, and <code>Vars</code> are pairs of equalities VariableName=Var, as defined in the <code>variable_names</code> option of <a href="https://www.swi-prolog.org/pldoc/man?predicate=read_term/2"><code>read_term/2</code></a> (those store original variable names, which is usefule when printing examples).</p>
</div>
</div>
</div>
</li>
<li>
<p><code>get_patterns/1</code>: <code>get_patterns(P)</code> collects all asserted <code>pattern/3</code> facts in one list</p>
</li>
<li>
<p><code>get_examples/1</code>: <code>get_examples(P)</code> collects all asserted <code>example/3</code> facts in one list</p>
</li>
<li>
<p><code>compile_pattern/1</code>: <code>compile_pattern(Id)</code> compiles pattern with identifier <code>Id</code>,</p>
</li>
<li>
<p><code>compile_patterns/0</code>: <code>compile_patterns</code> compiles all patterns</p>
</li>
<li>
<p><code>run/3</code>: <code>run(ExId, MaxLen, L-MTrees)</code> generates a single (use backtracking to generate more) example <code>L</code> of list of events matching pattern(s) linked as described in the first argument. <code>MaxLen</code> is the maximal number of matched events and <code>MTrees</code> is a list of lists of positions describing where precisely in a given pattern an event from <code>L</code> matched.</p>
</li>
<li>
<p><code>solutions/4</code> and <code>numbered_solutions/4</code> generate lists of all matchings (predicates are used by the web interface)</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_patterns_clpfd_pl">patterns_clpfd.pl</h4>
<div class="paragraph">
<p>This module simply reimports modules <a href="#_skip_pattern_syntax_pl">skip_pattern_syntax</a> and <a href="https://www.swi-prolog.org/man/clpfd.html">clpfd</a>.
The only reason for the existence of this module is that
the predicate <code>read_term/2</code> (used in <a href="#_read_patterns_pl">read_patterns.pl</a>) which parses Prolog terms from the input accepts only a single module parameter, and to parse definitions of patterns Prolog needs to recognize both pattern constructors such as <code>or</code> and <code>then</code> as well as integer constraints such as <code>#&gt;</code> as binary operators.</p>
</div>
</div>
<div class="sect3">
<h4 id="_read_patterns_pl">read_patterns.pl</h4>
<div class="paragraph">
<p>This module defines predicate <code>assert_file/1</code>. Execution of the goal
<code>assert_file(File)</code> reads input file <code>File</code> and asserts the definitions from this file as dynamic predicates such as <code>pattern/3</code> and example/3 from
<a href="#_pattern_pl">pattern.pl</a> and event type related predicates from <a href="#_event_types_pl">event_types.pl</a>.
This predicate, however, does not compile patterns.</p>
</div>
</div>
<div class="sect3">
<h4 id="_style_css">style.css</h4>
<div class="paragraph">
<p>This is a style file for the web interface.</p>
</div>
</div>
<div class="sect3">
<h4 id="_write_pattern_pl">write_pattern.pl</h4>
<div class="paragraph">
<p>This file contains helper functions which create html to be displayed by the web interface.</p>
</div>
</div>
<div class="sect3">
<h4 id="_server_pl">server.pl</h4>
<div class="paragraph">
<p>This file contains definitions of route handlers for the web interface as well as the predicate <code>server(Port, File)</code> which starts the web interface on port <code>Port</code> and reads input file <code>File</code></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_example_and_tests">Example and tests</h3>
<div class="paragraph">
<p>Apart from the app code itself, <code>PatternExplorer</code> folder also contains some files related to examples and tests</p>
</div>
<div class="sect3">
<h4 id="_example_data_pl">example_data.pl</h4>
<div class="paragraph">
<p>This file contains definition of bus traffic control event schema and example patterns and tests. The format is described in section <a href="#_input_file_syntax">Input file syntax</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_aux_types_data_pl">aux_types_data.pl</h4>
<div class="paragraph">
<p>This file contains definitions of spurious event types used in the timing test
(see section <a href="#_evaluation">Evaluation</a>).</p>
</div>
</div>
<div class="sect3">
<h4 id="_timed_test_pl">timed_test.pl</h4>
<div class="paragraph">
<p>This file contains prolog program which performs tests which times our tool under varying parameters (we also test alternative automaton implementations)
The script generates csv file named <code>raw_measurements.csv</code> (see section
<a href="#_description_of_generated_csv_file">Description of generated csv file</a>). Unfortunately, modifying the test parameters is not very user-friendly. First, the script is tied very strongly to to the patterns (100 and 101 in <code>example_data.pl</code>) and their parametrization and input and output events (see the definition of <code>run_/4</code> in this file). Other parameters can be modified by modifying definitions of predicates <code>files/3</code>, <code>ids/1</code>, and <code>mtests/2</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Definition of <code>files/3</code> is of the form</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-prolog" data-lang="prolog">files(⟨InputFile⟩, ⟨AuxFile⟩, ⟨OutputFile⟩).</code></pre>
</div>
</div>
<div class="paragraph">
<p>means that the schema declaration will be taken from file <code>⟨InputFile⟩,</code>, definition of spurious types will be taken from file <code>⟨AuxFile⟩`m and the measurements will be written to csv file `⟨OutputFile⟩</code> (see section <a href="#_description_of_generated_csv_file">Description of generated csv file</a> for the description of columns in this file)</p>
</div>
</div>
</div>
</li>
<li>
<p>Definition of <code>ids/1</code> is of the form</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-prolog" data-lang="prolog">ids(⟨id₁⟩-⟨id₂⟩)</code></pre>
</div>
</div>
<div class="paragraph">
<p>where we search for instances of pattern with identifier <code>⟨id₁⟩</code> which also match pattern with identifier <code>⟨id₂⟩</code>. If you modify this remember that the search defined in predicate <code>run_/4</code> depend on both patterns having appropriate input and output events and being parametrized by special event <code>lambda(par)</code>.</p>
</div>
</div>
</div>
</li>
<li>
<p>Definition of <code>mtests/2</code> is currently of the form</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-prolog" data-lang="prolog">mtests(
    [
        m('match_list', MatchList),
        m('match_list_ns', MatchListNS),
        m('match_list_nsc', MatchListNSCBasic)
    ],
    [
        m('match_list', MatchList),
        m('match_list_ns', MatchListNS),
        m('match_list_nsc', MatchListNSCExt)
    ]
) :- make_tests(5, ⟨Tests₁⟩, MatchList),
     make_tests(5, ⟨Tests₂⟩, MatchListNS),
     make_tests(5, ⟨Tests₃⟩, MatchListNSCBasic),
     make_tests(5, ⟨Tests₄⟩, MatchListNSCExt).</code></pre>
</div>
</div>
<div class="paragraph">
<p>where each of the arguments of <code>mtests/2</code> defines a set of tests for basic bus traffic control schema and schema extended by spurious types. Each set of tests consists of three parts where we test each of the automaton implementations. Implementations are identified by constants <code>match_list</code>, <code>match_list_ns</code> and
<code>match_list_nsc</code> (see section <a href="#_description_of_generated_csv_file">Description of generated csv file</a> for explanation). Note that we currently share some tests subsets among implementations and event schemas. Test subsets are passed as user-unfriendly terms generated from user-friendly terms ⟨Testsᵢ⟩ by <code>make_tests/3</code>. The first argument of <code>make_tests/3</code>
is the number of repetitions of each tests (currently 5 times). Each of the terms
⟨Testsᵢ⟩ is a Prolog list of the form</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-prolog" data-lang="prolog">[
  ⟨λ₁⟩-[⟨m₁⟩, ⟨m₂⟩, …],
  ⟨λ₂⟩-[⟨n₁⟩, ⟨n₂⟩, …],
  …
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>⟨λ₁⟩, ⟨λ₂⟩, …</code> are values of the λ parameter of tested patterns, and
<code>⟨m₁⟩, ⟨m₂⟩, …, ⟨n₁⟩, ⟨n₂⟩, …</code> are maximal lengths of solutions. Thus, according to the above, we will run the search for instances with maximal lenghts m₁, m₂, …   for λ = λ₁, then for instances maximal lenghts n₁, n₂, …   for λ = λ₂, etc.</p>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_create_plot_py">create_plot.py</h4>
<div class="paragraph">
<p>This is a Python3 script which processes <code>raw_measurements.csv</code> file and generates plots used in the paper (see section <a href="#_evaluation">Evaluation</a>).</p>
</div>
</div>
<div class="sect3">
<h4 id="_auto_noskip_pl">auto_noskip.pl</h4>
<div class="paragraph">
<p>This is an alternative implementation of search automaton used in timing tests (section <a href="#_evaluation">Evaluation</a>)  which represents single skipped events by constrained variables.</p>
</div>
</div>
<div class="sect3">
<h4 id="_auto_noskip_conc_pl">auto_noskip_conc.pl</h4>
<div class="paragraph">
<p>This is an alternative implementation of search automaton used in timing tests (section <a href="#_evaluation">Evaluation</a>) which narrows skipped events so that each has a type.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_evaluation">Evaluation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to rerun the tests call (in the <code>PatternExplorer</code> folder)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">swipl timed_test.pl</code></pre>
</div>
</div>
<div class="paragraph">
<p>Test will run for a long time, and after the end the interpreter quits automatically. See <a href="#_timed_test_pl">timed_test.pl</a> for information about how to modify tests.
The successful run should generate file <code>raw_mesurements.csv</code>.</p>
</div>
<div class="paragraph">
<p>In order to regenerate from <code>raw_mesurements.csv</code> the plot in the paper run</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">python3 create_plot.py</code></pre>
</div>
</div>
<div class="paragraph">
<p>This should generate file <code>fig2.png</code> with the pplot. The script apart from python3 requires <a href="https://docs.python.org/3/library/csv.html">csv</a> and
<a href="https://matplotlib.org/">matplotlib</a> libraries installed.</p>
</div>
<div class="sect2">
<h3 id="_description_of_generated_csv_file">Description of generated csv file</h3>
<div class="paragraph">
<p>The generated csv file contains the following fields:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>matcher</code></dt>
<dd>
<p>matching automaton implementation. Possible values are:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>match_list</code></dt>
<dd>
<p>the current implementation</p>
</dd>
<dt class="hdlist1"><code>match_list_ns</code></dt>
<dd>
<p>implementation which represents single skipped events by constrained variables</p>
</dd>
<dt class="hdlist1"><code>match_list_nsc</code></dt>
<dd>
<p>implementation which narrows skipped events so that each has a type.</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1">ntypes</dt>
<dd>
<p>number of types used in the event schema. Possible values are:</p>
<div class="dlist">
<dl>
<dt class="hdlist1">basic</dt>
<dd>
<p>just types actually used in the bus traffic example</p>
</dd>
<dt class="hdlist1">aux</dt>
<dd>
<p>types in the bus traffic example plus 20 additional spurious types.</p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1"><code>max_len</code></dt>
<dd>
<p>maximal length of generated/matched instance</p>
</dd>
<dt class="hdlist1"><code>lambda</code></dt>
<dd>
<p>parameter of patterns used in the tests</p>
</dd>
<dt class="hdlist1"><code>wall</code></dt>
<dd>
<p>total time of search</p>
</dd>
<dt class="hdlist1"><code>cpu</code></dt>
<dd>
<p>cpu time of search</p>
</dd>
<dt class="hdlist1"><code>inferences</code></dt>
<dd>
<p>number of inferences.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_raw_test_results">Raw test results</h3>
<div class="paragraph">
<p>The raw test results used in the paper can be downloaded <a href="raw_mesurements.csv">here</a>.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2022-06-07 12:39:28 +0200
</div>
</div>
</body>
</html>